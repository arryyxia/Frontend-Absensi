import{s as N}from"./index-DUj_bOrd.js";import{a as G}from"./index-CLPosJmL.js";import{s as M}from"./index-cc9cV2SV.js";import{_ as q}from"./Vuelidate-CUrviHgj.js";import{s as R}from"./index-W_yxFL_A.js";import{s as J}from"./index-id7zmlLk.js";import{s as Z}from"./index-Cb1qzt2o.js";import{s as Y}from"./index-BzB-9cPy.js";import{s as Q}from"./index-Py64ODey.js";import{s as E}from"./index-mZhnZxIp.js";import{_ as I,a as _,o as m,g as k,e as n,w as s,d as f,b as B,t as x,B as W,co as w,Z as A,c3 as L,n as X,ci as D,cp as $,cd as ee,C as ae,p as ie,x as te,y as ne,f as S,bj as oe,c as j,T as le,m as h,i as se,z as P,F as U,A as T,aU as re,D as O,ac as K,r as ce}from"./index-QCxCtTKT.js";import{F as de}from"./index-BZSd5lGD.js";import{O as pe}from"./index-cCG5cFl5.js";import{u as ue,r as p,e as me}from"./index-Ddfw1dfi.js";import{f as fe}from"./date-CMDVEbZz.js";import"./index-6r0TWLBF.js";import"./index-BxzLmvRS.js";import"./index-8Ex0-ttK.js";import"./index-CNQ4mGJM.js";const he={name:"TablePegawai",data(){return{pegawai:[],filters:{global:{value:null,matchMode:"contains"}},genderOptions:[{label:"Laki-laki",value:"l"},{label:"Perempuan",value:"p"}],loading:!0}},methods:{async getPegawaiAll(){try{const i=await _.get("pegawai");this.pegawai=i.data.data,this.loading=!1}catch(i){console.log("Error:"+i),this.loading=!1}},clearFilter(){this.filters={global:{value:null,matchMode:"contains"}}},handleEmailVerification(i){this.$emit("email-verification",i)},handleDelete(i){this.$emit("delete-pegawai",i)},handleEdit(i){this.$emit("edit-pegawai",i)}},mounted(){this.getPegawaiAll()}},ge={class:"card"},ke={class:"flex justify-between"},ve={class:"flex gap-2 bg-white"};function be(i,e,t,y,a,o){const g=E,V=R,r=Q,b=Y;return m(),k("div",ge,[n(b,{filters:a.filters,"onUpdate:filters":e[2]||(e[2]=c=>a.filters=c),value:a.pegawai,paginator:"",rows:10,rowsPerPageOptions:[5,10,20,50],scrollable:"",tableStyle:"min-width: 50rem",loading:a.loading,filterDisplay:"menu"},{header:s(()=>[f("div",ke,[n(g,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:e[0]||(e[0]=c=>o.clearFilter())}),n(V,{modelValue:a.filters.global.value,"onUpdate:modelValue":e[1]||(e[1]=c=>a.filters.global.value=c),placeholder:"Keyword Search"},null,8,["modelValue"])])]),empty:s(()=>e[3]||(e[3]=[B(" Data tidak ditemukan. ")])),default:s(()=>[n(r,{field:"id_pegawai",header:"No"}),n(r,{field:"nama_lengkap",header:"Nama",style:{"min-width":"300px"},class:"capitalize"}),n(r,{field:"",header:"Jenis Kelamin",style:{"min-width":"150px"}},{body:s(c=>[B(x(c.data.jk=="l"?"Laki-laki":"Perempuan"),1)]),_:1}),n(r,{field:"jabatan",header:"Jabatan",style:{"min-width":"200px"}}),n(r,{field:"email",header:"Email",style:{"min-width":"250px"}}),n(r,{field:"rekening",header:"Rekening",style:{"min-width":"250px"}}),n(r,{field:"nik",header:"NIK",style:{"min-width":"250px"}}),n(r,{field:"tempat_lahir",header:"Tempat Lahir",style:{"min-width":"200px"},class:"capitalize"}),n(r,{field:"tgl_lahir",header:"Tanggal Lahir",style:{"min-width":"200px"}}),n(r,{field:"alamat",header:"Alamat",style:{"min-width":"250px"},class:"capitalize"}),n(r,{field:"no_telp",header:"No. Telepon",style:{"min-width":"200px"}}),n(r,{field:"kontak_darurat",header:"No. Telp Darurat",style:{"min-width":"200px"}}),n(r,{field:"agama",header:"Agama",style:{"min-width":"150px"},class:"capitalize"}),n(r,{field:"gol_darah",header:"Gol. Darah",style:{"min-width":"150px"}}),n(r,{field:"pendidikan",header:"Pendidikan",style:{"min-width":"150px"},class:"capitalize"}),n(r,{field:"mulai_kerja",header:"Mulai Kerja",style:{"min-width":"150px"}}),n(r,{header:"Action",frozen:"",alignFrozen:"right"},{body:s(c=>[f("div",ve,[n(g,{icon:"pi pi-envelope",severity:"success","aria-label":"Notification",onClick:v=>o.handleEmailVerification(c.data.email)},null,8,["onClick"]),n(g,{icon:"pi pi-pencil",severity:"info","aria-label":"Notification",onClick:v=>o.handleEdit(c.data.id_pegawai)},null,8,["onClick"]),n(g,{icon:"pi pi-trash",severity:"danger","aria-label":"Notification",onClick:v=>o.handleDelete(c.data.id_pegawai)},null,8,["onClick"])])]),_:1})]),_:1},8,["filters","value","loading"])])}const _e=I(he,[["render",be],["__scopeId","data-v-5c74f138"]]),ye={name:"PageHeader",props:{title:String}},Ve={class:"col-span-12 font-semibold text-2xl text-[#334155]"};function we(i,e,t,y,a,o){return m(),k("h2",Ve,x(t.title),1)}const je=I(ye,[["render",we]]);var Le=function(e){var t=e.dt;return`
.p-confirmpopup {
    position: absolute;
    margin-top: `.concat(t("confirmpopup.gutter"),`;
    top: 0;
    left: 0;
    background: `).concat(t("confirmpopup.background"),`;
    color: `).concat(t("confirmpopup.color"),`;
    border: 1px solid `).concat(t("confirmpopup.border.color"),`;
    border-radius: `).concat(t("confirmpopup.border.radius"),`;
    box-shadow: `).concat(t("confirmpopup.shadow"),`;
}

.p-confirmpopup-content {
    display: flex;
    align-items: center;
    padding: `).concat(t("confirmpopup.content.padding"),`;
    gap: `).concat(t("confirmpopup.content.gap"),`;
}

.p-confirmpopup-icon {
    font-size: `).concat(t("confirmpopup.icon.size"),`;
    width: `).concat(t("confirmpopup.icon.size"),`;
    height: `).concat(t("confirmpopup.icon.size"),`;
    color: `).concat(t("confirmpopup.icon.color"),`;
}

.p-confirmpopup-footer {
    display: flex;
    justify-content: flex-end;
    gap: `).concat(t("confirmpopup.footer.gap"),`;
    padding: `).concat(t("confirmpopup.footer.padding"),`;
}

.p-confirmpopup-footer button {
    width: auto;
}

.p-confirmpopup-footer button:last-child {
    margin: 0;
}

.p-confirmpopup-flipped {
    margin-top: calc(`).concat(t("confirmpopup.gutter"),` * -1);
    margin-bottom: `).concat(t("confirmpopup.gutter"),`;
}

.p-confirmpopup-enter-from {
    opacity: 0;
    transform: scaleY(0.8);
}

.p-confirmpopup-leave-to {
    opacity: 0;
}

.p-confirmpopup-enter-active {
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1), opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-confirmpopup-leave-active {
    transition: opacity 0.1s linear;
}

.p-confirmpopup:after,
.p-confirmpopup:before {
    bottom: 100%;
    left: calc(`).concat(t("confirmpopup.arrow.offset")," + ").concat(t("confirmpopup.arrow.left"),`);
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.p-confirmpopup:after {
    border-width: calc(`).concat(t("confirmpopup.gutter"),` - 2px);
    margin-left: calc(-1 * (`).concat(t("confirmpopup.gutter"),` - 2px));
    border-style: solid;
    border-color: transparent;
    border-bottom-color: `).concat(t("confirmpopup.background"),`;
}

.p-confirmpopup:before {
    border-width: `).concat(t("confirmpopup.gutter"),`;
    margin-left: calc(-1 * `).concat(t("confirmpopup.gutter"),`);
    border-style: solid;
    border-color: transparent;
    border-bottom-color: `).concat(t("confirmpopup.border.color"),`;
}

.p-confirmpopup-flipped:after,
.p-confirmpopup-flipped:before {
    bottom: auto;
    top: 100%;
}

.p-confirmpopup-flipped:after {
    border-bottom-color: transparent;
    border-top-color: `).concat(t("confirmpopup.background"),`;
}

.p-confirmpopup-flipped:before {
    border-bottom-color: transparent;
    border-top-color: `).concat(t("confirmpopup.border.color"),`;
}
`)},Pe={root:"p-confirmpopup p-component",content:"p-confirmpopup-content",icon:"p-confirmpopup-icon",message:"p-confirmpopup-message",footer:"p-confirmpopup-footer",pcRejectButton:"p-confirmpopup-reject-button",pcAcceptButton:"p-confirmpopup-accept-button"},xe=W.extend({name:"confirmpopup",theme:Le,classes:Pe}),Ce={name:"BaseConfirmPopup",extends:ne,props:{group:String},style:xe,provide:function(){return{$pcConfirmPopup:this,$parentInstance:this}}},F={name:"ConfirmPopup",extends:Ce,inheritAttrs:!1,data:function(){return{visible:!1,confirmation:null,autoFocusAccept:null,autoFocusReject:null,target:null}},target:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,container:null,confirmListener:null,closeListener:null,mounted:function(){var e=this;this.confirmListener=function(t){t&&t.group===e.group&&(e.confirmation=t,e.target=t.target,e.confirmation.onShow&&e.confirmation.onShow(),e.visible=!0)},this.closeListener=function(){e.visible=!1,e.confirmation=null},w.on("confirm",this.confirmListener),w.on("close",this.closeListener)},beforeUnmount:function(){w.off("confirm",this.confirmListener),w.off("close",this.closeListener),this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindResizeListener(),this.container&&(A.clear(this.container),this.container=null),this.target=null,this.confirmation=null},methods:{accept:function(){this.confirmation.accept&&this.confirmation.accept(),this.visible=!1},reject:function(){this.confirmation.reject&&this.confirmation.reject(),this.visible=!1},onHide:function(){this.confirmation.onHide&&this.confirmation.onHide(),this.visible=!1},onAcceptKeydown:function(e){(e.code==="Space"||e.code==="Enter"||e.code==="NumpadEnter")&&(this.accept(),L(this.target),e.preventDefault())},onRejectKeydown:function(e){(e.code==="Space"||e.code==="Enter"||e.code==="NumpadEnter")&&(this.reject(),L(this.target),e.preventDefault())},onEnter:function(e){this.autoFocusAccept=this.confirmation.defaultFocus===void 0||this.confirmation.defaultFocus==="accept",this.autoFocusReject=this.confirmation.defaultFocus==="reject",this.target=document.activeElement,this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),A.set("overlay",e,this.$primevue.config.zIndex.overlay)},onAfterEnter:function(){this.focus()},onLeave:function(){this.autoFocusAccept=null,this.autoFocusReject=null,L(this.target),this.target=null,this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener()},onAfterLeave:function(e){A.clear(e)},alignOverlay:function(){X(this.container,this.target,!1);var e=D(this.container),t=D(this.target),y=0;e.left<t.left&&(y=t.left-e.left),this.container.style.setProperty($("confirmpopup.arrow.left").name,"".concat(y,"px")),e.top<t.top&&(this.container.setAttribute("data-p-confirmpopup-flipped","true"),!this.isUnstyled&&ee(this.container,"p-confirmpopup-flipped"))},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(t){e.visible&&e.container&&!e.container.contains(t.target)&&!e.isTargetClicked(t)?(e.confirmation.onHide&&e.confirmation.onHide(),e.visible=!1):e.alignOverlay()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new ae(this.target,function(){e.visible&&(e.visible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.visible&&!ie()&&(e.visible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},focus:function(){var e=this.container.querySelector("[autofocus]");e&&e.focus({preventScroll:!0})},isTargetClicked:function(e){return this.target&&(this.target===e.target||this.target.contains(e.target))},containerRef:function(e){this.container=e},onOverlayClick:function(e){pe.emit("overlay-click",{originalEvent:e,target:this.target})},onOverlayKeydown:function(e){e.code==="Escape"&&(w.emit("close",this.closeListener),L(this.target))}},computed:{message:function(){return this.confirmation?this.confirmation.message:null},acceptLabel:function(){if(this.confirmation){var e,t=this.confirmation;return t.acceptLabel||((e=t.acceptProps)===null||e===void 0?void 0:e.label)||this.$primevue.config.locale.accept}return this.$primevue.config.locale.accept},rejectLabel:function(){if(this.confirmation){var e,t=this.confirmation;return t.rejectLabel||((e=t.rejectProps)===null||e===void 0?void 0:e.label)||this.$primevue.config.locale.reject}return this.$primevue.config.locale.reject},acceptIcon:function(){var e;return this.confirmation?this.confirmation.acceptIcon:(e=this.confirmation)!==null&&e!==void 0&&e.acceptProps?this.confirmation.acceptProps.icon:null},rejectIcon:function(){var e;return this.confirmation?this.confirmation.rejectIcon:(e=this.confirmation)!==null&&e!==void 0&&e.rejectProps?this.confirmation.rejectProps.icon:null}},components:{Button:E,Portal:te},directives:{focustrap:de}},Ae=["aria-modal"];function Ee(i,e,t,y,a,o){var g=S("Button"),V=S("Portal"),r=oe("focustrap");return m(),j(V,null,{default:s(function(){return[n(le,h({name:"p-confirmpopup",onEnter:o.onEnter,onAfterEnter:o.onAfterEnter,onLeave:o.onLeave,onAfterLeave:o.onAfterLeave},i.ptm("transition")),{default:s(function(){var b,c,v;return[a.visible?se((m(),k("div",h({key:0,ref:o.containerRef,role:"alertdialog",class:i.cx("root"),"aria-modal":a.visible,onClick:e[2]||(e[2]=function(){return o.onOverlayClick&&o.onOverlayClick.apply(o,arguments)}),onKeydown:e[3]||(e[3]=function(){return o.onOverlayKeydown&&o.onOverlayKeydown.apply(o,arguments)})},i.ptmi("root")),[i.$slots.container?P(i.$slots,"container",{key:0,message:a.confirmation,acceptCallback:o.accept,rejectCallback:o.reject}):(m(),k(U,{key:1},[i.$slots.message?(m(),j(T(i.$slots.message),{key:1,message:a.confirmation},null,8,["message"])):(m(),k("div",h({key:0,class:i.cx("content")},i.ptm("content")),[P(i.$slots,"icon",{},function(){return[i.$slots.icon?(m(),j(T(i.$slots.icon),{key:0,class:re(i.cx("icon"))},null,8,["class"])):a.confirmation.icon?(m(),k("span",h({key:1,class:[a.confirmation.icon,i.cx("icon")]},i.ptm("icon")),null,16)):O("",!0)]}),f("span",h({class:i.cx("message")},i.ptm("message")),x(a.confirmation.message),17)],16)),f("div",h({class:i.cx("footer")},i.ptm("footer")),[n(g,h({class:[i.cx("pcRejectButton"),a.confirmation.rejectClass],autofocus:a.autoFocusReject,unstyled:i.unstyled,size:((b=a.confirmation.rejectProps)===null||b===void 0?void 0:b.size)||"small",text:((c=a.confirmation.rejectProps)===null||c===void 0?void 0:c.text)||!1,onClick:e[0]||(e[0]=function(d){return o.reject()}),onKeydown:o.onRejectKeydown},a.confirmation.rejectProps,{label:o.rejectLabel,pt:i.ptm("pcRejectButton")}),K({_:2},[o.rejectIcon||i.$slots.rejecticon?{name:"icon",fn:s(function(d){return[P(i.$slots,"rejecticon",{},function(){return[f("span",h({class:[o.rejectIcon,d.class]},i.ptm("pcRejectButton").icon,{"data-pc-section":"rejectbuttonicon"}),null,16)]})]}),key:"0"}:void 0]),1040,["class","autofocus","unstyled","size","text","onKeydown","label","pt"]),n(g,h({class:[i.cx("pcAcceptButton"),a.confirmation.acceptClass],autofocus:a.autoFocusAccept,unstyled:i.unstyled,size:((v=a.confirmation.acceptProps)===null||v===void 0?void 0:v.size)||"small",onClick:e[1]||(e[1]=function(d){return o.accept()}),onKeydown:o.onAcceptKeydown},a.confirmation.acceptProps,{label:o.acceptLabel,pt:i.ptm("pcAcceptButton")}),K({_:2},[o.acceptIcon||i.$slots.accepticon?{name:"icon",fn:s(function(d){return[P(i.$slots,"accepticon",{},function(){return[f("span",h({class:[o.acceptIcon,d.class]},i.ptm("pcAcceptButton").icon,{"data-pc-section":"acceptbuttonicon"}),null,16)]})]}),key:"0"}:void 0]),1040,["class","autofocus","unstyled","size","onKeydown","label","pt"])],16)],64))],16,Ae)),[[r]]):O("",!0)]}),_:3},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:3})}F.render=Ee;const Ie={name:"AdminPegawai",inject:["default"],data(){return{pegawai:[],btnIsLoading:!1,formIsLoading:!0,visible:!1,dialogTitle:"",dialogDeskripsi:"",v$:ue(),hasValidated:!1,no:1,editPegawaiData:[],formPost:!1,options:{jenisKelamin:[{name:"Laki-Laki",code:"l"},{name:"Perempuan",code:"p"}],agama:[{name:"Islam",code:"islam"},{name:"Kristen",code:"kristen"},{name:"Katolik",code:"katolik"},{name:"Hindu",code:"hindu"},{name:"Buddha",code:"buddha"},{name:"Konghucu",code:"konghucu"}],golDarah:[{name:"A",code:"A"},{name:"B",code:"B"},{name:"AB",code:"AB"},{name:"O",code:"O"},{name:"A+",code:"A+"},{name:"B+",code:"B+"},{name:"AB+",code:"AB+"},{name:"O+",code:"O+"},{name:"A-",code:"A-"},{name:"B-",code:"B-"},{name:"AB-",code:"AB-"},{name:"O-",code:"O-"}]},id_pegawai:"",nama_lengkap:"",email:"",nik:"",tgl_lahir:null,tempat_lahir:"",jk:"",agama:"",gol_darah:"",pendidikan:"",kontak_darurat:"08",mulai_kerja:null,jabatan:"",alamat:"",no_telp:"08",rekening:""}},validations(){return{id_pegawai:{required:p},nama_lengkap:{required:p},email:{required:p,email:me},nik:{required:p},tgl_lahir:{required:p},tempat_lahir:{required:p},jk:{required:p},agama:{required:p},gol_darah:{required:p},pendidikan:{required:p},kontak_darurat:{required:p},mulai_kerja:{required:p},jabatan:{required:p},alamat:{required:p},no_telp:{required:p},rekening:{required:p}}},methods:{formattedDate:fe,openPost(){this.formPost=!0,this.visible=!0,this.formIsLoading=!1,this.dialogTitle="Tambahkan Pegawai",this.dialogDeskripsi="Semua data dengan (*) wajib diisi!",this.nama_lengkap="",this.email="",this.nik="",this.tgl_lahir=null,this.tempat_lahir="",this.jk="",this.agama="",this.gol_darah="",this.pendidikan="",this.kontak_darurat="08",this.mulai_kerja=null,this.jabatan="",this.alamat="",this.no_telp="08",this.rekening=""},openEdit(i){this.visible=!0,this.dialogTitle="Edit Pegawai",this.dialogDeskripsi="Semua data dengan (*) wajib diisi!",console.log(i),this.formPost=!1,this.getPegawaiById(i)},close(){this.visible=!1,this.formIsLoading=!0},async getPegawaiAll(){await _.get("pegawai",{}).then(i=>{this.isLoading=!1,this.pegawai=i.data.data}).catch(i=>{console.log("Error:"+i),ce.push({name:"not-found"})})},async getPegawaiById(i){await _.get(`pegawai/${i}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(e=>{const t=e.data.data;this.editPegawaiData=t,this.formIsLoading=!1,this.id_pegawai=i,this.nama_lengkap=t.nama_lengkap,this.email=t.email,this.nik=t.nik,this.tgl_lahir=t.tgl_lahir,this.tempat_lahir=t.tempat_lahir,this.jk=t.jk,this.agama=t.agama,this.gol_darah=t.gol_darah,this.pendidikan=t.pendidikan,this.kontak_darurat=t.kontak_darurat,this.mulai_kerja=t.mulai_kerja,this.jabatan=t.jabatan,this.alamat=t.alamat,this.no_telp=t.no_telp,this.rekening=t.rekening}).catch(e=>{console.log(e),console.log(localStorage.getItem("token"))})},exportCSV(){this.$refs.dt.exportCSV()},async editPegawai(i){this.btnIsLoading=!0,this.hasValidated=!0,this.v$.$validate();const e={nama_lengkap:this.nama_lengkap,email:this.email,nik:this.nik,tgl_lahir:this.formattedDate(this.tgl_lahir),tempat_lahir:this.tempat_lahir,jk:this.jk,agama:this.agama,gol_darah:this.gol_darah,pendidikan:this.pendidikan,kontak_darurat:this.kontak_darurat,mulai_kerja:this.formattedDate(this.mulai_kerja),jabatan:this.jabatan,alamat:this.alamat,no_telp:this.no_telp,rekening:this.rekening};await _.put(`pegawai/${i}`,e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{this.hasValidated=!1,console.log(t.data),this.visible=!1,this.btnIsLoading=!1,this.getPegawaiAll()}).catch(t=>{console.log("Error ryan : "+t),console.log(t),this.btnIsLoading=!1,console.log(localStorage.getItem("token"))})},async postPegawai(){this.btnIsLoading=!0,this.hasValidated=!0,this.v$.$validate();const i={nama_lengkap:this.nama_lengkap,email:this.email,nik:this.nik,tgl_lahir:this.formattedDate(this.tgl_lahir),tempat_lahir:this.tempat_lahir,jk:this.jk,agama:this.agama,gol_darah:this.gol_darah,pendidikan:this.pendidikan,kontak_darurat:this.kontak_darurat,mulai_kerja:this.formattedDate(this.mulai_kerja),jabatan:this.jabatan,alamat:this.alamat,no_telp:this.no_telp,rekening:this.rekening};await _.post("pegawai",i,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(e=>{this.hasValidated=!1,this.visible=!1,this.btnIsLoading=!1,this.$toast.add({severity:"success",summary:"Pegawai berhasil ditambahkan!",detail:`Menambahkan pegawai ${e.data.data.nama_lengkap}`,life:5e3}),this.getPegawaiAll()}).catch(e=>{console.log(e),this.btnIsLoading=!1,this.$toast.add({severity:"error",summary:"Pegawai gagal ditambahkan!",detail:"Gagal menambahkan pegawai",life:5e3}),this.getPegawaiAll()})},async funDelete(i){await _.delete(`pegawai/${i}`,{headers:{Authorization:`Bearer ${this.default.token}`}}).then(e=>{this.getPegawaiAll(),console.log("berhasil delete"),console.log(e)}).catch(e=>{console.log(e)})},deletePegawai(i,e){this.$confirm.require({target:i.currentTarget,message:"Do you want to delete this record?",icon:"pi pi-info-circle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Delete",severity:"danger"},accept:()=>{this.$toast.add({severity:"success",summary:"Data berhasil dihapus",detail:"Data pegawai berhasil dihapus",life:5e3}),this.funDelete(e)},reject:()=>{this.$toast.add({severity:"error",summary:"Tidak jadi",detail:"kamu memutuskan untuk tidak menghapus data nya",life:5e3})}})},async emailVerification(i){const e={email:i};await _.post("email/send-verification",e,{headers:{Authorization:`Bearer ${this.default.token}`}}).then(t=>{this.$toast.add({severity:"success",summary:"Pegawai berhasil ditambahkan!",detail:`Menambahkan pegawai ${t.data.data.nama_lengkap}`,life:5e3}),console.log(t)}).catch(t=>{this.$toast.add({severity:"error",summary:"Pegawai gagal ditambahkan!",detail:"Gagal menambahkan pegawai",life:5e3}),console.log(t)})},openEmailVerification(i,e){this.$confirm.require({target:i.currentTarget,message:"Kirim email verifikasi?",icon:"pi pi-info-circle",rejectProps:{label:"Tidak",severity:"secondary",outlined:!0},acceptProps:{label:"Kirim",severity:"success"},accept:()=>{this.emailVerification(e),this.$toast.add({severity:"success",summary:"Email telah terkirim",detail:"",life:5e3})},reject:()=>{this.$toast.add({severity:"error",summary:"Tidak jadi",detail:"kamu memutuskan untuk tidak menghapus data nya",life:5e3})}})}},mounted(){this.getPegawaiAll()}},ze={class:"grid grid-cols-12 gap-5 m-5 mb-24 lg:mb-5"},Be={class:"flex justify-between"},De={class:"flex gap-2"},Se={class:"text-surface-500 dark:text-surface-400 block mb-8"},Te={key:0,class:"grid grid-cols-12 gap-5 h-96 m-5"},Oe={class:"col-span-12 w-full flex justify-center items-center"},Ke={key:1,class:"w-full grid grid-cols-12 gap-2"},Re={class:"col-span-12 flex justify-end gap-2"};function Ue(i,e,t,y,a,o){const g=F,V=je,r=E,b=_e,c=Z,v=J,d=R,u=q,z=M,C=G,H=N;return m(),k(U,null,[n(g),f("div",ze,[n(V,{title:"Pegawai"}),n(c,{class:"shadow-md col-span-12 lg:col-span-12 xl:col-span-12"},{title:s(()=>[f("div",Be,[e[18]||(e[18]=f("h3",null,"Daftar Pegawai",-1)),f("div",De,[n(r,{icon:"pi pi-user-plus",label:"Tambah",onClick:o.openPost},null,8,["onClick"]),n(r,{icon:"pi pi-external-link",label:"Export",onClick:e[0]||(e[0]=l=>o.exportCSV(l)),severity:"success"})])])]),content:s(()=>[n(b,{onEmailVerification:o.openEmailVerification,onDeletePegawai:o.deletePegawai,onEditPegawai:o.openEdit},null,8,["onEmailVerification","onDeletePegawai","onEditPegawai"])]),_:1})]),n(H,{visible:a.visible,"onUpdate:visible":e[17]||(e[17]=l=>a.visible=l),closable:!1,draggable:!1,closeOnEscape:!1,modal:"",header:a.dialogTitle,style:{width:"75rem"}},{default:s(()=>[f("span",Se,x(a.dialogDeskripsi),1),a.formIsLoading?(m(),k("div",Te,[f("div",Oe,[n(v)])])):(m(),k("form",Ke,[n(u,{name:"nama_lengkap",label:"Nama Lengkap",hasValidated:a.hasValidated},{default:s(()=>[n(d,{id:"nama_lengkap",modelValue:a.nama_lengkap,"onUpdate:modelValue":e[1]||(e[1]=l=>a.nama_lengkap=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.name.$invalid},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"email",label:"Email",hasValidated:a.hasValidated},{default:s(()=>[n(d,{id:"email",modelValue:a.email,"onUpdate:modelValue":e[2]||(e[2]=l=>a.email=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.email.$invalid},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"nik",label:"Nik",hasValidated:a.hasValidated},{default:s(()=>[n(d,{modelValue:a.nik,"onUpdate:modelValue":e[3]||(e[3]=l=>a.nik=l),id:"nik",useGrouping:!1,fluid:"",class:"col-span-12",invalid:a.hasValidated&&a.v$.nik.$invalid},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"tempat_lahir",label:"Tempat Lahir",hasValidated:a.hasValidated},{default:s(()=>[n(d,{id:"tempat_lahir",modelValue:a.tempat_lahir,"onUpdate:modelValue":e[4]||(e[4]=l=>a.tempat_lahir=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.tempat_lahir.$invalid},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"tgl_lahir",label:"Tanggal Lahir",hasValidated:a.hasValidated},{default:s(()=>[n(z,{inputId:"tgl_lahir",modelValue:a.tgl_lahir,"onUpdate:modelValue":e[5]||(e[5]=l=>a.tgl_lahir=l),dateFormat:"yy-mm-dd",class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.tgl_lahir.$invalid},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"alamat",label:"Alamat",hasValidated:a.hasValidated},{default:s(()=>[n(d,{id:"alamat",modelValue:a.alamat,"onUpdate:modelValue":e[6]||(e[6]=l=>a.alamat=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.alamat.$invalid},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"jk",label:"Jenis Kelamin",hasValidated:a.hasValidated},{default:s(()=>[n(C,{inputId:"jk",modelValue:a.jk,"onUpdate:modelValue":e[7]||(e[7]=l=>a.jk=l),options:a.options.jenisKelamin,optionLabel:"name",optionValue:"code",class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.jk.$invalid},null,8,["modelValue","options","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"agama",label:"Agama",hasValidated:a.hasValidated},{default:s(()=>[n(C,{inputId:"agama",modelValue:a.agama,"onUpdate:modelValue":e[8]||(e[8]=l=>a.agama=l),options:a.options.agama,optionLabel:"name",optionValue:"code",class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.agama.$invalid},null,8,["modelValue","options","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"gol_darah",label:"Golongan Darah",hasValidated:a.hasValidated},{default:s(()=>[n(C,{inputId:"gol_darah",modelValue:a.gol_darah,"onUpdate:modelValue":e[9]||(e[9]=l=>a.gol_darah=l),options:a.options.golDarah,optionLabel:"name",optionValue:"code",class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.gol_darah.$invalid},null,8,["modelValue","options","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"no_telp",label:"Nomor Telepon",hasValidated:a.hasValidated},{default:s(()=>[n(d,{id:"no_telp",useGrouping:!1,fluid:"",modelValue:a.no_telp,"onUpdate:modelValue":e[10]||(e[10]=l=>a.no_telp=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.no_telp.$invalid},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"kontak_darurat",label:"Kontak Darurat",hasValidated:a.hasValidated},{default:s(()=>[n(d,{id:"kontak_darurat",useGrouping:!1,fluid:"",modelValue:a.kontak_darurat,"onUpdate:modelValue":e[11]||(e[11]=l=>a.kontak_darurat=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.kontak_darurat.$invalid},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"rekening",label:"Nomor Rekening",hasValidated:a.hasValidated},{default:s(()=>[n(d,{id:"rekening",modelValue:a.rekening,"onUpdate:modelValue":e[12]||(e[12]=l=>a.rekening=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.rekening.$invalid},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"mulai_kerja",label:"Tanggal Mulai Kerja",hasValidated:a.hasValidated},{default:s(()=>[n(z,{inputId:"mulai_kerja",modelValue:a.mulai_kerja,"onUpdate:modelValue":e[13]||(e[13]=l=>a.mulai_kerja=l),dateFormat:"dd-mm-yy",class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.mulai_kerja.$invalid},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"jabatan",label:"Jabatan",hasValidated:a.hasValidated},{default:s(()=>[n(d,{id:"jabatan",modelValue:a.jabatan,"onUpdate:modelValue":e[14]||(e[14]=l=>a.jabatan=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.jabatan.$invalid},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(u,{name:"pendidikan",label:"Pendidikan",hasValidated:a.hasValidated},{default:s(()=>[n(d,{id:"pendidikan",modelValue:a.pendidikan,"onUpdate:modelValue":e[15]||(e[15]=l=>a.pendidikan=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.pendidikan.$invalid},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),f("div",Re,[n(r,{type:"button",label:"Tutup",severity:"secondary",onClick:o.close},null,8,["onClick"]),a.formPost?(m(),j(r,{key:1,type:"button",label:"Tambah",loading:a.btnIsLoading,onClick:o.postPegawai},null,8,["loading","onClick"])):(m(),j(r,{key:0,type:"button",label:"Edit",loading:a.btnIsLoading,onClick:e[16]||(e[16]=l=>o.editPegawai(a.id_pegawai))},null,8,["loading"]))])]))]),_:1},8,["visible","header"])],64)}const la=I(Ie,[["render",Ue]]);export{la as default};
