import{s as w}from"./index-Cb1qzt2o.js";import{s as g,a as k}from"./index-D5TWwLeq.js";import{s as _}from"./index-CkLDNPMj.js";import{s as b}from"./index-mZhnZxIp.js";import{_ as y,a as v,r as $,g as R,e,w as o,o as U,b as V,d as i,i as p,v as c,f as x}from"./index-QCxCtTKT.js";import"./index-C8vJup7Q.js";import"./index-W_yxFL_A.js";import"./index-cCG5cFl5.js";const P={name:"ResetPassword",inject:["default"],data(){return{password:"",password_confirm:"",dashboard:"",authStore:useAuthStore(),dataUser:0,dataRole:0}},methods:{getToken(){localStorage.setItem("token",this.$route.query.token)},async kirim(){const t={email:this.$route.query.email,password:this.password,password_confirmation:this.password_confirm};await v.post(`/password-reset?token=${this.$route.query.token}&email=${this.$route.query.email}`,t).then(s=>{console.log(s),this.$toast.add({severity:"success",summary:"Password Berhasil diganti",detail:"Masuk dengan password baru ",life:5e3}),$.push({name:this.dashboard})}).catch(s=>{console.log(s),this.$toast.add({severity:"error",summary:"Password Gagal diganti",detail:"Login dengan password lama ",life:5e3})})},async getUser(){await this.authStore.getUser(),this.dataUser=this.authStore.authUser,this.dataRole=this.authStore.userRole,this.dataRole=="admin"?this.dashboard="AdminDashboard":this.dashboard="UserDashboard"}},async mounted(){await this.getUser(),this.getToken(),this.isLoading=!1}},S={class:"flex w-full h-dvh items-center justify-center"},B={class:"flex flex-col gap-2"},C={class:"flex justify-center"};function q(t,s,D,L,a,f){const l=b,n=x("RouterLink"),d=g,u=_,m=k,h=w;return U(),R("div",S,[e(h,{class:"col-span-12 shadow-md"},{title:o(()=>s[3]||(s[3]=[V(" Reset Password ")])),content:o(()=>[i("div",B,[i("div",C,[p(e(n,{to:a.dashboard},{default:o(()=>[e(l,{label:"Kembali ke Dashboard"})]),_:1},8,["to"]),[[c,t.token]]),p(e(n,{to:"login"},{default:o(()=>[e(l,{label:"Login"})]),_:1},512),[[c,!t.token]])])]),i("form",{onSubmit:s[2]||(s[2]=(...r)=>t.prevent&&t.prevent(...r)),class:"flex flex-col gap-2"},[e(m,null,{default:o(()=>[e(d,null,{default:o(()=>s[4]||(s[4]=[i("i",{class:"pi pi-lock"},null,-1)])),_:1}),e(u,{class:"border border-[#CBD5E1]",modelValue:a.password,"onUpdate:modelValue":s[0]||(s[0]=r=>a.password=r),toggleMask:"",placeholder:"Password",feedback:!1,required:""},null,8,["modelValue"])]),_:1}),e(m,null,{default:o(()=>[e(d,null,{default:o(()=>s[5]||(s[5]=[i("i",{class:"pi pi-lock"},null,-1)])),_:1}),e(u,{class:"border border-[#CBD5E1]",modelValue:a.password_confirm,"onUpdate:modelValue":s[1]||(s[1]=r=>a.password_confirm=r),toggleMask:"",placeholder:"Konfirmasi Password",feedback:!1,required:""},null,8,["modelValue"])]),_:1}),e(l,{label:"Kirim",onClick:f.kirim},null,8,["onClick"])],32)]),_:1})])}const T=y(P,[["render",q]]);export{T as default};
