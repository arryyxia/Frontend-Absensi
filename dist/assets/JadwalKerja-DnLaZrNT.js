import{s as p}from"./index-mZhnZxIp.js";import{_ as c,o as d,g as h,d as s,t as f,e as n,aW as k,a as m,c as y,w as j,F as w,E as g}from"./index-QCxCtTKT.js";import{s as J}from"./index-DUj_bOrd.js";import{_ as K}from"./Vuelidate-CUrviHgj.js";import{s as B}from"./index-W_yxFL_A.js";import{r as C}from"./index-Ddfw1dfi.js";const V={name:"AddShift",props:{id:Number,nama_shift:String,warna:String,jam_masuk:String,jam_keluar:String}},D={class:"flex items-center gap-2"};function I(t,a,l,_,i,o){const r=p;return d(),h("div",{style:k({backgroundColor:l.warna}),class:"rounded-md text-white py-3 px-3 flex justify-between items-center cursor-pointer"},[s("div",null,f(l.nama_shift),1),s("div",D,[a[0]||(a[0]=s("i",{class:"pi pi-clock"},null,-1)),s("p",null,f(l.jam_masuk)+"-"+f(l.jam_keluar),1),n(r,{"aria-controls":"overlay_tmenu",icon:"",unstyled:"",class:"flex justify-center items-center"})])],4)}const O=c(V,[["render",I]]),A={name:"Shift",props:{api:String},data(){return{data:[],loading:!0}},methods:{async getShift(){await m.get(this.api).then(t=>{this.data=t.data.data,this.loading=!1}).catch(t=>{console.log(t)})}},mounted(){this.getShift()}},M={key:0,style:{backgroundColor:"#07134F"},class:"rounded-md text-white py-3 px-3 flex justify-between items-center"},N={class:"flex items-center gap-2"};function F(t,a,l,_,i,o){const r=p;return i.loading?(d(),h("div",M,a[0]||(a[0]=[s("div",null," Loading... ",-1)]))):(d(),h("div",{key:1,style:k({backgroundColor:i.data.warna}),class:"rounded-md text-white py-3 px-3 flex justify-between items-center"},[s("div",null,f(i.data.nama_shift),1),s("div",N,[a[1]||(a[1]=s("i",{class:"pi pi-clock"},null,-1)),s("p",null,f(i.data.jam_masuk)+"-"+f(i.data.jam_keluar),1),n(r,{"aria-controls":"overlay_tmenu",icon:"",unstyled:"",class:"flex justify-center items-center"})])],4))}const L=c(A,[["render",F]]),T={props:["hari"],emits:["openShift"],name:"BtnJadwalKerja",inject:["default"],data(){return{}},methods:{},mounted(){}};function q(t,a,l,_,i,o){const r=p;return d(),y(r,{label:l.hari,onClick:a[0]||(a[0]=S=>t.$emit("openShift"))},null,8,["label"])}const E=c(T,[["render",q]]),G={name:"DialogJadwalKerja",inject:["default"],props:{visible:Boolean,is_default:{type:Boolean,required:!1,default:!1}},emits:["toggle"],data(){return{data:[],shift:[],hari:"",visibleShift:!1,selectedShift:null,selectedShiftId:null,nama_jadwal:"",hasValidated:!1}},validations(){return{nama_jadwal:{required:C}}},watch:{data:"updateData",selectedShift:"updateData",nama_jadwal:"updateData"},methods:{selectShift(t,a){this.selectedShift=t,this.selectedShiftId=a,this.visibleShift=!this.visibleShift},openShift(t){this.hari=t,this.visibleShift=!this.visibleShift},updateData(){const t={hari:this.hari,id_shift:this.selectedShiftId},a=this.data.findIndex(l=>l.hari===this.hari);a!==-1?this.data[a]=t:this.data.push(t)},async getAllShift(){await m.get("shift").then(t=>{this.isLoading=!1,this.shift=t.data.data}).catch(t=>{})},async postJadwalKerja(){const t={nama_jadwal:this.nama_jadwal,jadwal:this.data};await m.post("jadwal",t).then(a=>{this.visibleShift=!1,this.$toast.add({severity:"success",summary:"Jadwal kerja berhasil ditambahkan!",detail:`Menambahkan jadwal kerja ${a.data.data.nama_jadwal}`,life:5e3})}).catch(a=>{this.$toast.add({severity:"error",summary:"Jadwal kerja gagal ditambahkan!",detail:"Gagal menambahkan jadwal kerja",life:5e3}),this.visibleShift=!1})},async postJadwalKerjaDefault(){const t={nama_jadwal:this.nama_jadwal,is_default:!0,jadwal:this.data};await m.post("jadwal",t).then(a=>{this.visibleShift=!1,this.$toast.add({severity:"success",summary:"Jadwal kerja berhasil ditambahkan!",detail:`Menambahkan jadwal kerja ${a.data.data.nama_jadwal}`,life:5e3})}).catch(a=>{this.visibleShift=!1,this.$toast.add({severity:"error",summary:"Jadwal kerja gagal ditambahkan!",detail:"Gagal menambahkan jadwal kerja",life:5e3})})},post(){this.is_default?this.postJadwalKerjaDefault():this.postJadwalKerja()}},mounted(){this.getAllShift()}},P={class:"p-7 grid grid-cols-12"},R={class:"col-span-12 w-full gap-1"},U={class:"col-span-12 flex justify-center overflow-x-auto mb-3 gap-2"},z={class:"col-span-12 w-full overflow-y-auto flex flex-col gap-2 mb-3"},H={class:"col-span-12 flex justify-end gap-2"},W={class:"flex flex-col gap-2"};function Q(t,a,l,_,i,o){const r=B,S=K,u=E,x=L,v=p,b=J,$=O;return d(),h(w,null,[n(b,{visible:l.visible,modal:"",header:"Tambahkan Jadwal Kerja",style:{width:"40rem"}},{container:j(()=>[s("form",P,[a[10]||(a[10]=s("p",{class:"col-span-12 text-xl mb-6 font-semibold"},"Tambahkan Jadwal Kerja",-1)),s("div",R,[n(S,{name:"nama_jadwal",label:"Nama Jadwal",hasValidated:i.hasValidated},{default:j(()=>[n(r,{id:"nama_jadwal",modelValue:i.nama_jadwal,"onUpdate:modelValue":a[0]||(a[0]=e=>i.nama_jadwal=e),class:"col-span-12 max-h-[46px]",disabled:!i.selectedShift,invalid:i.hasValidated&&t.v$.nama_jadwal.$invalid},null,8,["modelValue","disabled","invalid"])]),_:1},8,["hasValidated"])]),s("div",U,[n(u,{hari:"Selasa",onOpenShift:a[1]||(a[1]=e=>o.openShift("Selasa"))}),n(u,{hari:"Rabu",onOpenShift:a[2]||(a[2]=e=>o.openShift("Rabu"))}),n(u,{hari:"Kamis",onOpenShift:a[3]||(a[3]=e=>o.openShift("Kamis"))}),n(u,{hari:"Jum'at",onOpenShift:a[4]||(a[4]=e=>o.openShift("Jum'at"))}),n(u,{hari:"Sabtu",onOpenShift:a[5]||(a[5]=e=>o.openShift("Sabtu"))}),n(u,{hari:"Minggu",onOpenShift:a[6]||(a[6]=e=>o.openShift("Minggu"))})]),s("div",z,[a[9]||(a[9]=s("p",null,"Pilih Shift Kerja",-1)),(d(!0),h(w,null,g(i.data,e=>(d(),h("div",{key:e.id_shift},[s("p",null,"Hari : "+f(e.hari),1),n(x,{api:`shift/${i.selectedShiftId}`},null,8,["api"])]))),128))]),s("div",H,[n(v,{type:"button",label:"Cancel",severity:"secondary",onClick:a[7]||(a[7]=e=>t.$emit("toggle"))}),n(v,{type:"button",label:"Save",onClick:o.post},null,8,["onClick"])])])]),_:1},8,["visible"]),n(b,{visible:i.visibleShift,"onUpdate:visible":a[8]||(a[8]=e=>i.visibleShift=e),modal:"",header:"Pilih Shift Kerja",style:{width:"30rem"}},{default:j(()=>[s("div",W,[(d(!0),h(w,null,g(i.shift,e=>(d(),y($,{key:e.id_shift,id:e.id_shift,nama_shift:e.nama_shift,warna:e.warna,jam_masuk:e.jam_masuk,jam_keluar:e.jam_keluar,onClick:X=>o.selectShift(e.nama_shift,e.id_shift)},null,8,["id","nama_shift","warna","jam_masuk","jam_keluar","onClick"]))),128))])]),_:1},8,["visible"])],64)}const sa=c(G,[["render",Q]]);export{sa as _};
